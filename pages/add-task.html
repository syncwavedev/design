<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/public/main.css" rel="stylesheet" />
    <script>
      let currentTheme = "light";

      function setTheme(theme) {
        document.documentElement.setAttribute("data-theme", theme);
        currentTheme = theme;
      }

      function toggleTheme() {
        const newTheme = currentTheme === "light" ? "dark" : "light";
        setTheme(newTheme);
        localStorage.setItem("theme", newTheme);
      }

      document.addEventListener("DOMContentLoaded", () => {
        // Check for browser preference
        const prefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)",
        ).matches;

        // Use saved theme if exists, otherwise use browser preference
        const savedTheme =
          localStorage.getItem("theme") || (prefersDark ? "dark" : "light");
        setTheme(savedTheme);

        // Listen for browser theme changes
        window
          .matchMedia("(prefers-color-scheme: dark)")
          .addEventListener("change", (e) => {
            if (!localStorage.getItem("theme")) {
              setTheme(e.matches ? "dark" : "light");
            }
          });
      });
    </script>
  </head>
  <body>
    <main class="flex w-full h-screen">
      <!-- <div
        class="w-58 min-w-58 flex flex-col border-r border-divider px-2 bg-subtle-1"
      >
        <div class="flex items-center sticky top-0 py-2">
          <button class="btn--icon">{{ template "search.html" . }}</button>
          <button class="ml-auto btn--icon">
            {{ template "panel-right.html" . }}
          </button>
          <button class="btn--icon">{{ template "plus.html" . }}</button>
        </div>

        <div class="overflow-y-auto text-xs flex flex-col items-start">
          {{ range .Boards }}
          <div
            class="flex gap-1.5 items-center p-2 text-ink-body hover:text-ink hover:bg-subtle-2 rounded-lg w-full"
          >
            {{ template "hashtag.html" . }}
            <span class="truncate leading-snug"> {{.Name}} </span>
          </div>
          {{ end }}
        </div>
        <div class="flex items-center mt-auto mb-2">
          <div class="btn--block">
            <button class="btn text-[1.325em]">
              {{ template "avatar.html" "A" }}
            </button>
            <span class="ml-1.5 text-xs">Andrei</span>
          </div>
          <button class="ml-auto btn--icon text-base">
            {{ template "cog.html" . }}
          </button>
        </div>
      </div> -->

      <!-- Board -->
      <div class="grow flex flex-col min-w-0 bg-subtle-1 dark:bg-subtle-0">
        <!-- Fixed Header -->
        <div class="sticky top-0 z-10 px-4 bg-subtle-1 dark:bg-subtle-0">
          <div class="flex items-center my-2">
            <div class="text-xs font-semibold leading-none">Syncwave Core</div>

            <button class="btn--icon ml-auto">
              {{ template "plus.html" . }}
            </button>
            <button class="btn--icon">{{ template "search.html" . }}</button>
            <button class="btn--icon">{{ template "ellipsis.html" . }}</button>
          </div>
        </div>

        <!-- Scrollable Tasks Container -->
        <div class="flex-1 overflow-auto px-4 pb-4">
          <div class="flex gap-4 text-xs">
            <!-- Backlog Column -->
            <div class="w-58 flex-shrink-0">
              <div class="mb-2 text-3xs uppercase">Backlog</div>
              <div class="flex flex-col gap-2">
                {{ range seq 11 }} {{ template "boards/task-tile.html" . }} {{
                end }}
              </div>
            </div>
            <!-- In Design Column -->
            <div class="w-58 flex-shrink-0">
              <div class="mb-2 text-3xs uppercase">In Design</div>
              <div class="flex flex-col gap-2">
                {{ range seq 4 }} {{ template "boards/task-tile.html" . }} {{
                end }}
              </div>
            </div>
            <!-- Ready for dev -->
            <div class="w-58 flex-shrink-0">
              <div class="mb-2 text-3xs uppercase">Ready for Dev</div>
              <div class="flex flex-col gap-2">
                {{ range seq 8 }} {{ template "boards/task-tile.html" . }} {{
                end }}
              </div>
            </div>
            <!-- In Progress Column -->
            <div class="w-58 flex-shrink-0">
              <div class="mb-2 text-3xs uppercase">In Progress</div>
              <div class="flex flex-col gap-2">
                {{ range seq 4 }} {{ template "boards/task-tile.html" . }} {{
                end }}
              </div>
            </div>
            <!-- Review Column -->
            <div class="w-58 flex-shrink-0">
              <div class="mb-2 text-3xs uppercase">Review</div>
              <div class="flex flex-col gap-2">
                {{ range seq 8 }} {{ template "boards/task-tile.html" . }} {{
                end }}
              </div>
            </div>
            <!-- Done Column -->
            <div class="w-58 flex-shrink-0">
              <div class="mb-2 text-3xs uppercase">Done</div>
              <div class="flex flex-col gap-2">
                {{ range seq 6 }} {{ template "boards/task-tile.html" . }} {{
                end }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        class="w-112 min-w-84 flex flex-col border-l border-divider bg-subtle-0 dark:bg-subtle-1 z-10 flex-shrink-0"
      >
        <!-- Scrollable Content Section -->
        <div class="flex-grow overflow-y-auto px-4">
          <!-- Header -->
          <div
            class="flex items-center sticky top-0 py-2 bg-subtle-0 dark:bg-subtle-1 z-20"
          >
            <div class="text-xs font-semibold">SYNC-1</div>
            <button class="ml-auto btn--icon">
              {{ template "ellipsis.html" . }}
            </button>
            <button class="btn--icon">{{ template "times.html" . }}</button>
          </div>
          <!-- Task Description -->
          <textarea
            class="input text-xs leading-relaxed mb-1 w-full"
            rows="5"
            placeholder="Write here..."
          >
Telling all students they are champions, regardless of performance, may seem kind — until you consider how quickly reality will shatter this illusion after graduation. Reality, unlike well-meaning school policies, does have public grades and rankings — whether in sports, business, science, or technology. AI benchmarks that demonstrate DeepSeek's superiority are one of such public rankings. And more are coming. Unless the US secondary education system undergoes radical reform, China’s growing dominance in technology seems inevitable
          </textarea>
          <!-- Task Actions -->
          <div class="flex gap-1">
            <div class="btn--block">
              {{ template "circle-dashed.html" . }}
              <span class="ml-1.5 text-xs">In Progress</span>
            </div>
            <div class="btn--block">
              <span> {{ template "avatar.html" "A" }} </span>
              <span class="ml-1.5 text-xs">Andrei Andreev</span>
            </div>
          </div>
          <!-- Full-Width Horizontal Rule -->
          <hr class="mt-2 mb-4 -mx-4" />
          <!-- Messages Section -->
          <div class="flex justify-center items-center mb-2">
            <div
              class="bg-subtle-1 dark:bg-subtle-2 px-2 py-0.5 rounded-xl text-3xs"
            >
              <span class="font-semibold">Andrei</span>
              <span class="text-ink-detail">created Feb 23, 2023</span>
            </div>
          </div>
          {{ range seq 6 }}
          <div
            class="flex flex-col gap-1 -mx-2 p-2 hover:bg-subtle-1 dark:hover:bg-subtle-2 rounded-lg"
          >
            <div class="flex gap-1.5 items-center">
              <div class="text-[1.125em]">{{ template "avatar.html" "A" }}</div>
              <div class="flex items-baseline gap-1.5">
                <div class="text-2xs font-semibold">Andrei</div>
                <div class="text-4xs text-ink-detail">2h ago</div>
              </div>
            </div>
            <div class="text-xs leading-relaxed">
              MemHash proved there’s always room for a new app on Telegram —
              provided you deeply understand which features made its
              predecessors popular. The key is to borrow only what works while
              innovating and differentiating elsewhere
            </div>
          </div>
          {{ end }}
        </div>
        <!-- Fixed Message Input -->
        <div class="my-2 mx-4 z-10 bg-subtle-0 dark:bg-subtle-1">
          <div class="flex gap-2 items-end">
            <div
              class="flex items-end bg-subtle-1 dark:bg-subtle-2 border border-divider z-10 rounded-lg w-full"
            >
              <textarea
                class="input text-xs w-full leading-relaxed px-2 py-1"
                rows="1"
                placeholder="Type a message..."
              ></textarea>
              <button class="btn--icon">{{ template "attach.html" }}</button>
            </div>
            <button class="btn--icon btn--icon--ink">
              {{ template "arrow-up.html" }}
            </button>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
